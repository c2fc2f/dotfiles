#!/bin/bash

# Define download URL and file paths
URL="https://download.mozilla.org/?product=thunderbird-nightly-latest-SSL&os=linux64&lang=en-US"
FILE="/tmp/thunderbird.tar.bz2"
DESTINATION="/opt"
UNCOMPRESS="/tmp/thunderbird"

# Download tar.gz file
echo "Download Thunderbird Daily..."
curl -o "$FILE" -L "$URL"

# Check if the download was successful
if [ -f "$FILE" ]; then
    echo "Download successful. File decompression..."
    # Uncompress the file in /tmp
    tar -xjf "$FILE" -C /tmp

    # Copy decompressed content to /opt
    echo "Copy decompressed files to $DESTINATION..."
    sudo cp -r "$UNCOMPRESS" "$DESTINATION"

    # Cleaning up the tar.gz file
    echo "Cleaning..."
    rm "$FILE"
    rm -rf "$UNCOMPRESS"

    echo "Installation successfully completed!"
else
    echo "Error: The file was not downloaded correctly."
fi
